{"version":3,"file":"FTabs.66c8602b.js","sources":["../../src/components/LTabs/LTabs.ts","../../src/components/ui/FTabs.vue"],"sourcesContent":["// btn-primary, btn-accent, btn-second, btn-danger\nimport {\n  h,\n  defineComponent,\n  ref,\n  inject,\n  computed,\n  provide,\n  onMounted,\n  onUnmounted,\n  watch,\n} from \"vue\";\nimport type { Ref, InjectionKey, WritableComputedRef } from \"vue\";\n\nimport { useId } from \"@/composable/useId\";\n\nexport type StateDefinition = {\n  // State\n  selectedIndex: Ref<number>;\n  focusedIndex: Ref<number>;\n  selectedKey: Ref<string>;\n  focusedKey: Ref<string>;\n  orientation: Ref<\"vertical\" | \"horizontal\">;\n  activation: Ref<\"auto\" | \"manual\">;\n  model: WritableComputedRef<string>;\n\n  tabs: Ref<{ tab: HTMLElement | null; tabData: string }[]>;\n  panels: Ref<(HTMLElement | null)[]>;\n\n  // State mutators\n  setSelectedKey(key: string): void;\n  setFocusedIndex(tab: string): void;\n  registerTab(tab: Ref<HTMLElement | null>, tabData: string): void;\n  unregisterTab(tab: Ref<HTMLElement | null>, tabData: string): void;\n  registerPanel(panel: HTMLElement | null): void;\n  unregisterPanel(panel: HTMLElement | null): void;\n};\n\nexport const TabsContext = Symbol(\n  \"TabsContext\"\n) as InjectionKey<StateDefinition>;\n\nfunction useContext(component: string) {\n  const context = inject(TabsContext, null);\n\n  if (context === null) {\n    const err = new Error(\n      `<${component} /> is missing a parent <TabGroup /> component.`\n    );\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useContext);\n    throw err;\n  }\n\n  return context;\n}\n\nexport const LTabs = defineComponent({\n  name: \"LTabs\",\n  props: {\n    as: { type: [Object, String], default: \"div\" },\n    selectedIndex: { type: [Number], default: 0 },\n    defaultIndex: { type: [Number], default: 0 },\n    vertical: { type: [Boolean], default: false },\n    manual: { type: [Boolean], default: false },\n    modelValue: { type: [String], default: \"\" },\n  },\n  emits: {\n    change: (_index: string) => _index,\n    \"update:modelValue\": (index: string) => index,\n  },\n  setup(props, { slots, emit }) {\n    const selectedIndex = ref<StateDefinition[\"selectedIndex\"][\"value\"]>(0);\n    const focusedIndex = ref<StateDefinition[\"focusedIndex\"][\"value\"]>(0);\n    const selectedKey = ref<StateDefinition[\"selectedKey\"][\"value\"]>(\"\");\n    const focusedKey = ref<StateDefinition[\"focusedKey\"][\"value\"]>(\"\");\n    const tabs = ref<StateDefinition[\"tabs\"][\"value\"]>([]);\n    const panels = ref<StateDefinition[\"panels\"][\"value\"]>([]);\n    const model = computed<StateDefinition[\"model\"][\"value\"]>({\n      get() {\n        return props.modelValue;\n      },\n      set(val) {\n        val && emit(\"update:modelValue\", val);\n      },\n    });\n\n    const tabApi = {\n      selectedIndex,\n      focusedIndex,\n      selectedKey,\n      focusedKey,\n      orientation: computed(() => (props.vertical ? \"vertical\" : \"horizontal\")),\n      activation: computed(() => (props.manual ? \"manual\" : \"auto\")),\n      tabs,\n      panels,\n      model,\n      setSelectedKey(key: string) {\n        if (selectedKey.value === key) return;\n        selectedKey.value = key;\n\n        const index = tabs.value.findIndex((x) => x.tabData == key);\n        selectedIndex.value = index;\n\n        emit(\"change\", key);\n        model.value = key;\n        emit(\"update:modelValue\", key);\n      },\n      setFocusedIndex(tab: string) {\n        if (focusedKey.value === tab) return;\n        focusedKey.value = tab;\n        const indexTab = tabs.value.findIndex((x) => x.tabData == tab);\n        focusedIndex.value = indexTab;\n      },\n      registerTab(tab: Ref<HTMLElement | null>, tabData: string) {\n        // if (!tabs.value[id]) tabs.value[id] = tab;\n        tabs.value.push({\n          tab: tab.value,\n          tabData,\n        });\n      },\n      unregisterTab(tab: Ref<HTMLElement | null>, id: string) {\n        const idx = tabs.value.findIndex((x) => x.tabData === id);\n        if (idx !== -1) tabs.value.splice(idx, 1);\n        // if (tabs.value[id]) delete tabs.value[id];\n      },\n      registerPanel(panel: typeof panels.value[number]) {\n        if (!panels.value.includes(panel)) panels.value.push(panel);\n      },\n      unregisterPanel(panel: typeof panels.value[number]) {\n        const idx = panels.value.indexOf(panel);\n        if (idx !== -1) panels.value.splice(idx, 1);\n      },\n    };\n\n    watch(\n      () => props.modelValue,\n      (val) => {\n        tabApi.setSelectedKey(val);\n      }\n    );\n\n    provide(TabsContext, tabApi);\n\n    return () => h(props.as, { class: \"tabs\" }, [slots.default?.({ tabApi })]);\n    // return () => {\n    //   const slot = { selectedIndex: selectedIndex.value };\n    //   const children = slots.default?.(slot);\n    //   const { as, ...incomingProps } = Object.assign(props, [\n    //     \"unmount\",\n    //     \"static\",\n    //   ]);\n\n    //   return h(as, { class: \"tabs\" }, children);\n    // };\n  },\n});\n\nexport const LTabsList = defineComponent({\n  name: \"LTabsList\",\n  props: {\n    as: { type: [Object, String], default: \"div\" },\n  },\n  setup(props, { slots }) {\n    const tabApi = useContext(\"LTabsList\");\n\n    // const slot = slots.default?.();\n    // const tabList = []\n    // if (slot[0].type == Fragment) {\n\n    // }\n    // console.log(\"slots.default\", slots.default?.());\n\n    return () => {\n      // const slot = { selectedIndex: tabApi.selectedIndex.value }\n      // const children = slots.default?.(slot)\n      const ourProps = {\n        role: \"tablist\",\n        \"aria-orientation\": tabApi?.orientation.value,\n      };\n\n      return h(\n        props.as,\n        {\n          class: \"tabs-list\",\n          ...ourProps,\n        },\n        [slots.default?.({ ...props })]\n      );\n    };\n  },\n});\n\nexport const LTab = defineComponent({\n  name: \"LTab\",\n  props: {\n    as: { type: [Object, String], default: \"button\" },\n    tab: { type: [String], default: \"default\" },\n    disabled: { type: [Boolean], default: false },\n  },\n  setup(props, { slots, expose }) {\n    const tabApi = useContext(\"LTab\");\n\n    const id = `l-tabs-tab-${useId()}`;\n\n    const internalTabRef = ref<HTMLElement | null>(null);\n\n    expose({ el: internalTabRef, $el: internalTabRef });\n\n    onMounted(() => {\n      tabApi.registerTab(internalTabRef, props.tab);\n      if (props.tab == tabApi?.model.value) {\n        tabApi.setSelectedKey(props.tab);\n        // handleSelection();\n      }\n    });\n    onUnmounted(() => tabApi?.unregisterTab(internalTabRef, props.tab));\n\n    const indexTab = computed(() =>\n      tabApi?.tabs.value.findIndex((x) => x.tab == internalTabRef.value)\n    );\n    const selected = computed(() => props.tab === tabApi.selectedKey.value);\n    const focused = computed(() => props.tab === tabApi.focusedKey.value);\n\n    const nextTab = (e: KeyboardEvent) => {\n      if (tabApi.focusedIndex.value == tabApi.tabs.value.length - 1) return;\n      tabApi.focusedIndex.value = tabApi.focusedIndex.value + 1;\n      tabApi.tabs.value[tabApi.focusedIndex.value].tab?.focus();\n\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    const prevTab = (e: KeyboardEvent) => {\n      if (tabApi.focusedIndex.value < 1) return;\n      tabApi.focusedIndex.value = tabApi.focusedIndex.value - 1;\n      tabApi.tabs.value[tabApi.focusedIndex.value].tab?.focus();\n\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    const handleFocus = () => {\n      internalTabRef.value?.focus();\n      tabApi.setFocusedIndex(props.tab);\n    };\n\n    /**\n     * event click\n     */\n    const handleSelection = () => {\n      if (props.disabled) return;\n      internalTabRef.value?.focus();\n      tabApi.setSelectedKey(props.tab);\n      tabApi.setFocusedIndex(props.tab);\n    };\n\n    // watch(\n    //   () => tabApi?.model.value,\n    //   () => {\n    //     console.log(\"change model value tabApi?.model=\", tabApi?.model);\n    //     // selectedKey.value = props.modelValue;\n    //     handleSelection();\n    //   }\n    // );\n\n    // This is important because we want to only focus the tab when it gets focus\n    // OR it finished the click event (mouseup). However, if you perform a `click`,\n    // then you will first get the `focus` and then get the `click` event.\n    function handleMouseDown(e: MouseEvent) {\n      e.preventDefault();\n    }\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // const list = tabApi?.tabs.value\n      //   .map((tab) => dom(tab))\n      //   .filter(Boolean) as HTMLElement[];\n\n      if (e.key === \"Space\" || e.key === \"Enter\") {\n        e.preventDefault();\n        e.stopPropagation();\n\n        tabApi.setSelectedKey(props.tab);\n        return;\n      }\n\n      switch (e.key) {\n        case \"Home\":\n        case \"PageUp\":\n          e.preventDefault();\n          e.stopPropagation();\n\n          tabApi.tabs.value[0].tab?.focus();\n          tabApi.activation.value == \"auto\" &&\n            tabApi.tabs.value[0].tab?.click();\n          return;\n\n        case \"End\":\n        case \"PageDown\":\n          e.preventDefault();\n          e.stopPropagation();\n\n          tabApi.tabs.value[tabApi.tabs.value.length - 1].tab?.focus();\n          tabApi.activation.value == \"auto\" &&\n            tabApi.tabs.value[tabApi.tabs.value.length - 1].tab?.click();\n          return;\n      }\n\n      if (tabApi?.orientation.value == \"vertical\") {\n        if (e.key === \"ArrowUp\") prevTab(e);\n        if (e.key === \"ArrowDown\") nextTab(e);\n        return;\n      } else {\n        if (e.key === \"ArrowLeft\") {\n          prevTab(e);\n        } else if (e.key === \"ArrowRight\") {\n          nextTab(e);\n        }\n      }\n    };\n\n    const relatedPanel = computed(() => tabApi.panels.value[indexTab.value]);\n\n    return () => {\n      const slot: any = { selected: selected.value };\n\n      const ourProps: any = {\n        ref: internalTabRef,\n        onKeydown: handleKeyDown,\n        onFocus:\n          tabApi.activation.value === \"manual\" ? handleFocus : handleSelection,\n        onMousedown: handleMouseDown,\n        onClick: handleSelection,\n        id,\n        role: \"tab\",\n        type: \"button\",\n        \"aria-controls\": relatedPanel.value?.id,\n        \"aria-selected\": selected.value,\n        tabIndex: selected.value ? 0 : -1,\n        disabled: props.disabled ? true : undefined,\n        [\"data-deletable\"]: false,\n      };\n\n      const children = slots.default ? slots.default(slot) : [];\n      // console.log(\"children\", children);\n\n      // console.log(children);\n\n      return h(children[0], {\n        ...props,\n        ...ourProps,\n        selected: selected.value,\n        focused: focused.value,\n      });\n    };\n  },\n});\n\nexport const LTabPanels = defineComponent({\n  name: \"LTabPanels\",\n  props: {\n    as: { type: [Object, String], default: \"div\" },\n  },\n  setup(props, { slots }) {\n    const tabApi = useContext(\"LTabPanels\");\n\n    return () => {\n      const slot = { selectedIndex: tabApi?.selectedIndex.value };\n\n      return h(\n        props.as,\n        {\n          class: \"tabs-panels\",\n        },\n        [slots.default?.({ slot })]\n      );\n      // render({\n      //   theirProps: props,\n      //   ourProps: {},\n      //   slot,\n      //   attrs,\n      //   slots,\n      //   name: \"TabPanels\",\n      // });\n    };\n  },\n});\n\nexport const LTabPanel = defineComponent({\n  name: \"LTabPanel\",\n  props: {\n    as: { type: [Object, String], default: \"div\" },\n    static: { type: Boolean, default: false },\n    unmount: { type: Boolean, default: true },\n  },\n  setup(props, { slots, expose }) {\n    const tabApi = useContext(\"LTabPanel\");\n    if (!tabApi) {\n      return;\n    }\n    const id = `l-tabs-panel-${useId()}`;\n\n    const internalPanelRef = ref<HTMLElement | null>(null);\n\n    expose({ el: internalPanelRef, $el: internalPanelRef });\n\n    onMounted(() => tabApi?.registerPanel(internalPanelRef.value));\n    onUnmounted(() => tabApi?.unregisterPanel(internalPanelRef.value));\n\n    const myIndex = computed(() =>\n      tabApi.panels.value.indexOf(internalPanelRef.value)\n    );\n    const selected = computed(\n      () => myIndex.value === tabApi.selectedIndex.value\n    );\n\n    return () => {\n      const slot = { selected: selected.value };\n      const ourProps = {\n        ref: internalPanelRef,\n        id,\n        role: \"tabpanel\",\n        \"aria-labelledby\": tabApi.tabs.value[myIndex.value]?.tab?.id,\n        tabIndex: selected.value ? 0 : -1,\n      };\n\n      if (!selected.value && props.unmount && !props.static) {\n        return h(\"div\", {\n          ...ourProps,\n          style: {\n            position: \"fixed\",\n            top: 1,\n            left: 1,\n            width: 1,\n            height: 0,\n            padding: 0,\n            margin: -1,\n            overflow: \"hidden\",\n            clip: \"rect(0, 0, 0, 0)\",\n            whiteSpace: \"nowrap\",\n            borderWidth: \"0\",\n          },\n        });\n      }\n      return h(\n        props.as,\n        {\n          ...ourProps,\n          visible: selected.value,\n          // class: Object.assign({}, attrs.class, { hidden: !selected.value }},\n        },\n        [slots.default?.(slot)]\n      );\n    };\n  },\n});\n","<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n  name: \"FTabs\",\n  inheritAttrs: false,\n});\n</script>\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport {\n  LTabs,\n  LTabsList,\n  LTab,\n  LTabPanels,\n  LTabPanel,\n} from \"@/components/LTabs\";\n\nconst props = withDefaults(\n  defineProps<{\n    /**\n     * modelValue - model string\n     */\n    modelValue: string;\n    /**\n     * tabs\n     */\n    tabs: Array<string>;\n  }>(),\n  {\n    modelValue: \"\",\n  }\n);\n\nconst emit = defineEmits([\"update:modelValue\", \"on-input\"]);\n\nconst model = computed({\n  get: () => props.modelValue,\n  set: (val: string) => {\n    emit(\"update:modelValue\", val);\n  },\n});\n</script>\n\n<template>\n  <LTabs v-model=\"model\" manual class=\"mt-2 bg-white dark:bg-s-700\">\n    <LTabsList class=\"flex space-x-1\">\n      <LTab v-for=\"tab in tabs\" :key=\"tab\" :tab=\"tab\" v-slot=\"{ selected }\">\n        <button\n          type=\"button\"\n          :class=\"[\n            'w-full p-2 leading-5 font-medium text-s-900 dark:text-s-300 border-b-2',\n            'focus:outline-none ring-offset-1 ring-offset-s-300 ring-opacity-20',\n            selected\n              ? 'border-p-500 '\n              : 'border-transparent text-s-100 hover:bg-black/[0.1] hover:text-black dark:hover:text-white',\n          ]\"\n        >\n          {{ tab }}\n        </button>\n      </LTab>\n    </LTabsList>\n    <LTabPanels class=\"flex-auto\">\n      <div\n        :class=\"[\n          'p-3',\n          'focus:outline-none focus:ring-1 focus:ring-dott ring-s-200 ring-opacity-20',\n        ]\"\n      >\n        <LTabPanel key=\"Recent\">\n          Recent\n          <button>Button</button>\n        </LTabPanel>\n        <LTabPanel key=\"Popular\">\n          Popular\n          <button>Popular Button</button>\n        </LTabPanel>\n      </div>\n    </LTabPanels>\n  </LTabs>\n</template>\n"],"names":["TabsContext","useContext","component","context","inject","err","__name","LTabs","defineComponent","_index","index","props","slots","emit","selectedIndex","ref","focusedIndex","selectedKey","focusedKey","tabs","panels","model","computed","val","tabApi","key","x","tab","indexTab","tabData","id","idx","panel","watch","provide","h","_a","LTabsList","ourProps","LTab","expose","useId","internalTabRef","onMounted","onUnmounted","selected","focused","nextTab","e","prevTab","handleFocus","handleSelection","handleMouseDown","handleKeyDown","_b","_c","_d","relatedPanel","slot","children","LTabPanels","LTabPanel","internalPanelRef","myIndex","__default__"],"mappings":"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"}