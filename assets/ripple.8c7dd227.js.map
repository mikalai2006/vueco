{"version":3,"file":"ripple.8c7dd227.js","sources":["../../src/components/LBtn/LBtn.ts","../../src/directives/ripple.ts"],"sourcesContent":["import { h, defineComponent, type PropType, ref } from \"vue\";\n\nexport enum TypeBtnMode {\n  primary = \"primary\",\n  second = \"second\",\n  accent = \"accent\",\n  danger = \"danger\",\n  link = \"link\",\n}\nexport enum TypeBtnTag {\n  a = \"a\",\n  div = \"div\",\n  button = \"button\",\n}\n\nexport const LBtn = defineComponent({\n  name: \"LBtn\",\n  props: {\n    as: {\n      type: String as PropType<keyof typeof TypeBtnTag>,\n      default: \"button\",\n      validator(val: TypeBtnTag) {\n        return [...Object.values(TypeBtnTag)].includes(val);\n      },\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * V-model pressed for pressed mode button\n     */\n    pressed: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  emit: [\"update:pressed\"],\n  setup(props, { slots, emit }) {\n    return () =>\n      h(\n        props.as,\n        {\n          role: ![\"button\", \"input\"].includes(props.as) ? \"button\" : undefined,\n          tabindex: ![\"button\", \"input\"].includes(props.as) ? 0 : undefined,\n          type: [\"input\", \"button\"].includes(props.as) ? \"button\" : undefined,\n          \"aria-pressed\": ![\"button\", \"input\"].includes(props.as)\n            ? props.pressed == true\n            : undefined,\n          disabled: props.disabled || undefined,\n          onClick: () => {\n            !props.disabled && emit(\"update:pressed\", !props.pressed);\n            // console.log(\"click\");\n          },\n          onKeydown: (e: KeyboardEvent) => {\n            (e.key === \"Space\" || e.key === \"Enter\") &&\n              !props.disabled &&\n              emit(\"update:pressed\", !props.pressed);\n          },\n        },\n        {\n          default: () => (slots.default ? slots.default() : []),\n        }\n      );\n  },\n});\n","const removeEl = function (params: any) {\n  const { preCircle } = params;\n  if (preCircle) {\n    preCircle.remove();\n  }\n};\n\nconst createRipple = (event: any) => {\n  const button = event.currentTarget;\n  const options = event.currentTarget.ripple_options;\n  const preCircle = document.createElement(\"div\");\n  preCircle.className += \"overflow-hidden absolute inset-0 b-rounded\";\n  const circle = document.createElement(\"span\");\n  const diameter = Math.max(button.clientWidth, button.clientHeight);\n  const radius = diameter / 2;\n\n  circle.style.width = circle.style.height = `${diameter}px`;\n  const target = button.getBoundingClientRect();\n  circle.style.left = `${event.clientX - target.left - radius}px`; // - (button.offsetLeft + radius)}px`;\n  circle.style.top = `${event.clientY - target.top - radius}px`; //  - (button.offsetTop + radius)}px`;\n  circle.classList.add(\"ripple\");\n  if (options.class) {\n    circle.className += ` ${options.class}`;\n  } else {\n    circle.className += \" bg-black/20 dark:bg-white/20\";\n  }\n  circle.style.animation = `ripple ${options.duration || 600}ms ${\n    options.timingf || \"linear\"\n  }`;\n  preCircle.appendChild(circle);\n  button.prepend(preCircle);\n\n  setTimeout(\n    removeEl.bind(null, { preCircle, options }),\n    options.duration || 600\n  );\n};\n\nexport const ripple = {\n  mounted: (el: any, binding: any): any => {\n    if (binding.value) {\n      const options = binding.value;\n      el.addEventListener(\"click\", createRipple);\n      el.ripple_options = options;\n    } else {\n      console.log(\"Not found value for ripple\", el, binding.value);\n    }\n  },\n  updated(el: any, binding: any) {\n    const options = binding;\n    if (options.oldValue !== options.value) {\n      // el.removeEventListener('click', createRipple)\n      el.ripple_options = { ...options.value };\n      // el.addEventListener('click', createRipple)\n    }\n  },\n};\n"],"names":["TypeBtnMode","TypeBtnTag","LBtn","defineComponent","val","props","slots","emit","h","e","removeEl","__name","params","preCircle","createRipple","event","button","options","circle","diameter","radius","target","ripple","el","binding"],"mappings":"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"}