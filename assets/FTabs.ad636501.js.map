{"version":3,"file":"FTabs.ad636501.js","sources":["../../src/composable/useDom.ts","../../src/components/LTabs/LTabs.ts","../../src/components/ui/FTabs.vue"],"sourcesContent":["import type { Ref, ComponentPublicInstance } from \"vue\";\n\nexport function useDom<T extends Element | ComponentPublicInstance>(\n  ref?: Ref<T | null>\n): T | null {\n  if (ref == null) return null;\n  if (ref.value == null) return null;\n\n  return \"$el\" in ref.value\n    ? (ref.value.$el.$el as T | null)\n      ? (ref.value.$el.$el as T | null)\n      : (ref.value.$el as T | null)\n    : ref.value;\n}\n","// btn-primary, btn-accent, btn-second, btn-danger\nimport {\n  h,\n  defineComponent,\n  ref,\n  inject,\n  computed,\n  provide,\n  onMounted,\n  onUnmounted,\n  watch,\n  type VNode,\n} from \"vue\";\nimport type { Ref, InjectionKey, WritableComputedRef } from \"vue\";\n\nimport { useId } from \"@/composable/useId\";\nimport { useDom } from \"@/composable/useDom\";\n\nexport type StateDefinition = {\n  // State\n  selectedIndex: Ref<number>;\n  focusedIndex: Ref<number>;\n  selectedKey: Ref<string>;\n  focusedKey: Ref<string>;\n  orientation: Ref<\"vertical\" | \"horizontal\">;\n  activation: Ref<\"auto\" | \"manual\">;\n  model: WritableComputedRef<string>;\n\n  tabs: Ref<Ref<HTMLElement | null>[]>;\n  tabsKeys: Ref<string[]>;\n  panels: Ref<(HTMLElement | null)[]>;\n\n  // State mutators\n  setSelectedKey(key: string): void;\n  setFocusedIndex(tab: string): void;\n  registerTab(tab: Ref<HTMLElement | null>, tabData: string): void;\n  unregisterTab(tab: Ref<HTMLElement | null>, tabData: string): void;\n  registerPanel(panel: HTMLElement | null): void;\n  unregisterPanel(panel: HTMLElement | null): void;\n};\n\nexport const TabsContext = Symbol(\n  \"TabsContext\"\n) as InjectionKey<StateDefinition>;\n\nfunction useContext(component: string) {\n  const context = inject(TabsContext, null);\n\n  if (context === null) {\n    const err = new Error(\n      `<${component} /> is missing a parent <TabGroup /> component.`\n    );\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useContext);\n    throw err;\n  }\n\n  return context;\n}\n\nexport const LTabs = defineComponent({\n  name: \"LTabs\",\n  props: {\n    as: { type: [Object, String], default: \"div\" },\n    selectedIndex: { type: [Number], default: 0 },\n    defaultIndex: { type: [Number], default: 0 },\n    vertical: { type: [Boolean], default: false },\n    manual: { type: [Boolean], default: false },\n    modelValue: { type: [String], default: \"\" },\n  },\n  emits: {\n    change: (_index: string) => _index,\n    \"update:modelValue\": (index: string) => index,\n  },\n  setup(props, { slots, emit }) {\n    const selectedIndex = ref<StateDefinition[\"selectedIndex\"][\"value\"]>(0);\n    const focusedIndex = ref<StateDefinition[\"focusedIndex\"][\"value\"]>(0);\n    const selectedKey = ref<StateDefinition[\"selectedKey\"][\"value\"]>(\"\");\n    const focusedKey = ref<StateDefinition[\"focusedKey\"][\"value\"]>(\"\");\n    const tabs = ref<StateDefinition[\"tabs\"][\"value\"]>([]);\n    const tabsKeys = ref<StateDefinition[\"tabsKeys\"][\"value\"]>([]);\n    const panels = ref<StateDefinition[\"panels\"][\"value\"]>([]);\n    const model = computed<StateDefinition[\"model\"][\"value\"]>({\n      get() {\n        return props.modelValue;\n      },\n      set(val) {\n        val && emit(\"update:modelValue\", val);\n      },\n    });\n\n    const tabApi = {\n      selectedIndex,\n      focusedIndex,\n      selectedKey,\n      focusedKey,\n      orientation: computed(() => (props.vertical ? \"vertical\" : \"horizontal\")),\n      activation: computed(() => (props.manual ? \"manual\" : \"auto\")),\n      tabs,\n      tabsKeys,\n      panels,\n      model,\n      setSelectedKey(key: string) {\n        if (selectedKey.value === key) return;\n        selectedKey.value = key;\n\n        const index = tabsKeys.value.findIndex((x) => x == key);\n        selectedIndex.value = index;\n\n        emit(\"change\", key);\n        model.value = key;\n        emit(\"update:modelValue\", key);\n      },\n      setFocusedIndex(tab: string) {\n        if (focusedKey.value === tab) return;\n        focusedKey.value = tab;\n        const indexTab = tabsKeys.value.findIndex((x) => x == tab);\n        focusedIndex.value = indexTab;\n      },\n      registerTab(tab: Ref<HTMLElement | null>, tabKey: string) {\n        // if (!tabs.value[id]) tabs.value[id] = tab;\n        if (tab) {\n          tabs.value.push(tab);\n          tabsKeys.value.push(tabKey);\n        }\n      },\n      unregisterTab(tab: Ref<HTMLElement | null>, id: string) {\n        const idx = tabsKeys.value.findIndex((x) => x === id);\n        if (idx !== -1) {\n          tabs.value.splice(idx, 1);\n          tabsKeys.value.splice(idx, 1);\n        }\n        // if (tabs.value[id]) delete tabs.value[id];\n      },\n      registerPanel(panel: typeof panels.value[number]) {\n        if (!panels.value.includes(panel)) panels.value.push(panel);\n      },\n      unregisterPanel(panel: typeof panels.value[number]) {\n        const idx = panels.value.indexOf(panel);\n        if (idx !== -1) panels.value.splice(idx, 1);\n      },\n    };\n\n    watch(\n      () => props.modelValue,\n      (val) => {\n        tabApi.setSelectedKey(val);\n      }\n    );\n\n    provide(TabsContext, tabApi);\n\n    return () =>\n      h(\n        props.as as string,\n        { class: \"tabs\" },\n        {\n          default: () => (slots.default ? slots.default({ tabApi }) : []),\n        }\n      );\n    // return () => {\n    //   const slot = { selectedIndex: selectedIndex.value };\n    //   const children = slots.default?.(slot);\n    //   const { as, ...incomingProps } = Object.assign(props, [\n    //     \"unmount\",\n    //     \"static\",\n    //   ]);\n\n    //   return h(as, { class: \"tabs\" }, children);\n    // };\n  },\n});\n\nexport const LTabsList = defineComponent({\n  name: \"LTabsList\",\n  props: {\n    as: { type: [Object, String], default: \"div\" },\n  },\n  setup(props, { slots }) {\n    const tabApi = useContext(\"LTabsList\");\n\n    // const slot = slots.default?.();\n    // const tabList = []\n    // if (slot[0].type == Fragment) {\n\n    // }\n    // console.log(\"slots.default\", slots.default?.());\n\n    return () => {\n      // const slot = { selectedIndex: tabApi.selectedIndex.value }\n      // const children = slots.default?.(slot)\n      const ourProps = {\n        role: \"tablist\",\n        \"aria-orientation\": tabApi?.orientation.value,\n      };\n\n      return h(\n        props.as as string,\n        {\n          class: \"tabs-list\",\n          ...ourProps,\n        },\n        {\n          default: () => (slots.default ? slots.default() : []),\n        }\n        // [slots.default?.({ ...props })]\n      );\n    };\n  },\n});\n\nexport const LTab = defineComponent({\n  name: \"LTab\",\n  props: {\n    as: { type: [Object, String], default: \"button\" },\n    tab: { type: [String], default: \"default\" },\n    disabled: { type: [Boolean], default: false },\n  },\n  setup(props, { slots, expose }) {\n    const tabApi = useContext(\"LTab\");\n\n    const id = `l-tabs-tab-${useId()}`;\n\n    const internalTabRef = ref<HTMLElement | null>(null);\n\n    expose({ el: internalTabRef, $el: internalTabRef });\n\n    onMounted(() => {\n      tabApi.registerTab(internalTabRef, props.tab);\n      if (props.tab == tabApi?.model.value) {\n        tabApi.setSelectedKey(props.tab);\n        // handleSelection();\n      }\n    });\n    onUnmounted(() => tabApi?.unregisterTab(internalTabRef, props.tab));\n\n    const indexTab = computed(() =>\n      tabApi?.tabs.value.findIndex((x) => x.value == internalTabRef.value)\n    );\n    const selected = computed<boolean>(\n      () => props.tab === tabApi.selectedKey.value\n    );\n    const focused = computed(() => props.tab === tabApi.focusedKey.value);\n\n    const nextTab = (e: KeyboardEvent) => {\n      if (tabApi.focusedIndex.value == tabApi.tabs.value.length - 1) return;\n      tabApi.focusedIndex.value = tabApi.focusedIndex.value + 1;\n      useDom(tabApi.tabs.value[tabApi.focusedIndex.value])?.focus();\n\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    const prevTab = (e: KeyboardEvent) => {\n      if (tabApi.focusedIndex.value < 1) return;\n      tabApi.focusedIndex.value = tabApi.focusedIndex.value - 1;\n      useDom(tabApi.tabs.value[tabApi.focusedIndex.value])?.focus();\n\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    const handleFocus = () => {\n      useDom(internalTabRef)?.focus();\n      tabApi.setFocusedIndex(props.tab);\n    };\n\n    /**\n     * event click\n     */\n    const handleSelection = () => {\n      if (props.disabled) return;\n      useDom(internalTabRef)?.focus();\n      tabApi.setSelectedKey(props.tab);\n      tabApi.setFocusedIndex(props.tab);\n    };\n\n    // watch(\n    //   () => tabApi?.model.value,\n    //   () => {\n    //     console.log(\"change model value tabApi?.model=\", tabApi?.model);\n    //     // selectedKey.value = props.modelValue;\n    //     handleSelection();\n    //   }\n    // );\n\n    // This is important because we want to only focus the tab when it gets focus\n    // OR it finished the click event (mouseup). However, if you perform a `click`,\n    // then you will first get the `focus` and then get the `click` event.\n    function handleMouseDown(e: MouseEvent) {\n      e.preventDefault();\n    }\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // const list = tabApi?.tabs.value\n      //   .map((tab) => dom(tab))\n      //   .filter(Boolean) as HTMLElement[];\n\n      if (e.key === \"Space\" || e.key === \"Enter\") {\n        e.preventDefault();\n        e.stopPropagation();\n\n        tabApi.setSelectedKey(props.tab);\n        return;\n      }\n\n      switch (e.key) {\n        case \"Home\":\n        case \"PageUp\":\n          e.preventDefault();\n          e.stopPropagation();\n\n          useDom(tabApi.tabs.value[0])?.focus();\n          tabApi.activation.value == \"auto\" &&\n            useDom(tabApi.tabs.value[0])?.click();\n          return;\n\n        case \"End\":\n        case \"PageDown\":\n          e.preventDefault();\n          e.stopPropagation();\n\n          useDom(tabApi.tabs.value[tabApi.tabs.value.length - 1])?.focus();\n          tabApi.activation.value == \"auto\" &&\n            useDom(tabApi.tabs.value[tabApi.tabs.value.length - 1])?.click();\n          return;\n      }\n\n      if (tabApi?.orientation.value == \"vertical\") {\n        if (e.key === \"ArrowUp\") prevTab(e);\n        if (e.key === \"ArrowDown\") nextTab(e);\n        return;\n      } else {\n        if (e.key === \"ArrowLeft\") {\n          prevTab(e);\n        } else if (e.key === \"ArrowRight\") {\n          nextTab(e);\n        }\n      }\n    };\n\n    const relatedPanel = computed(() => tabApi.panels.value[indexTab.value]);\n\n    return () => {\n      // const slot: any = { selected: selected.value };\n\n      const ourProps: any = {\n        ref: internalTabRef,\n        onKeydown: handleKeyDown,\n        onFocus:\n          tabApi.activation.value === \"manual\" ? handleFocus : handleSelection,\n        onMousedown: handleMouseDown,\n        onClick: handleSelection,\n        id,\n        role: \"tab\",\n        type: \"button\",\n        \"aria-controls\": relatedPanel.value?.id,\n        \"aria-selected\": selected.value,\n        tabIndex: selected.value ? 0 : -1,\n        disabled: props.disabled ? true : undefined,\n        [\"data-deletable\"]: false,\n      };\n\n      // const children = slots.default ? slots.default(slot) : [];\n\n      if (props.as == \"template\") {\n        const _slots = slots.default?.({\n          selected: selected.value,\n          focused: focused.value,\n        });\n        const _children = _slots?.length ? _slots[0] : _slots;\n        return _children\n          ? h(\n              _children,\n              Object.assign(\n                {},\n                ourProps,\n                {\n                  // ...props,\n                  selected: selected.value,\n                  focused: focused.value,\n                },\n                {\n                  ..._children?.props,\n                }\n              )\n            )\n          : null;\n      } else {\n        return h(\n          props.as as string,\n          {\n            // ...props,\n            ...ourProps,\n            selected: selected.value,\n            focused: focused.value,\n          },\n          {\n            default: () =>\n              slots.default\n                ? slots.default({\n                    selected: selected.value,\n                  })\n                : [],\n          }\n        );\n      }\n    };\n  },\n});\n\nexport const LTabPanels = defineComponent({\n  name: \"LTabPanels\",\n  props: {\n    as: { type: [Object, String], default: \"div\" },\n  },\n  setup(props, { slots }) {\n    const tabApi = useContext(\"LTabPanels\");\n\n    return () => {\n      const slot = { selectedIndex: tabApi?.selectedIndex.value };\n\n      return h(\n        props.as,\n        {\n          class: \"tabs-panels\",\n        },\n        [slots.default?.({ slot })]\n      );\n      // render({\n      //   theirProps: props,\n      //   ourProps: {},\n      //   slot,\n      //   attrs,\n      //   slots,\n      //   name: \"TabPanels\",\n      // });\n    };\n  },\n});\n\nexport const LTabPanel = defineComponent({\n  name: \"LTabPanel\",\n  props: {\n    as: { type: [Object, String], default: \"div\" },\n    static: { type: Boolean, default: false },\n    unmount: { type: Boolean, default: true },\n  },\n  setup(props, { slots, expose }) {\n    const tabApi = useContext(\"LTabPanel\");\n    if (!tabApi) {\n      return;\n    }\n    const id = `l-tabs-panel-${useId()}`;\n\n    const internalPanelRef = ref<HTMLElement | null>(null);\n\n    expose({ el: internalPanelRef, $el: internalPanelRef });\n\n    onMounted(() => tabApi?.registerPanel(internalPanelRef.value));\n    onUnmounted(() => tabApi?.unregisterPanel(internalPanelRef.value));\n\n    const myIndex = computed(() =>\n      tabApi.panels.value.indexOf(internalPanelRef.value)\n    );\n    const selected = computed(\n      () => myIndex.value === tabApi.selectedIndex.value\n    );\n\n    return () => {\n      const slot = { selected: selected.value };\n      const ourProps = {\n        ref: internalPanelRef,\n        id,\n        role: \"tabpanel\",\n        \"aria-labelledby\": useDom(tabApi.tabs.value[myIndex.value])?.id,\n        tabIndex: selected.value ? 0 : -1,\n      };\n\n      if (!selected.value && props.unmount && !props.static) {\n        return h(\"div\", {\n          ...ourProps,\n          style: {\n            position: \"fixed\",\n            top: 1,\n            left: 1,\n            width: 1,\n            height: 0,\n            padding: 0,\n            margin: -1,\n            overflow: \"hidden\",\n            clip: \"rect(0, 0, 0, 0)\",\n            whiteSpace: \"nowrap\",\n            borderWidth: \"0\",\n          },\n        });\n      }\n      return h(\n        props.as,\n        {\n          ...ourProps,\n          visible: selected.value,\n          // class: Object.assign({}, attrs.class, { hidden: !selected.value }},\n        },\n        [slots.default?.(slot)]\n      );\n    };\n  },\n});\n","<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n  name: \"FTabs\",\n  inheritAttrs: false,\n});\n</script>\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport {\n  LTabs,\n  LTabsList,\n  LTab,\n  LTabPanels,\n  LTabPanel,\n} from \"@/components/LTabs\";\n\nconst props = withDefaults(\n  defineProps<{\n    /**\n     * modelValue - model string\n     */\n    modelValue: string;\n    /**\n     * tabs\n     */\n    tabs: Array<string>;\n  }>(),\n  {\n    modelValue: \"\",\n  }\n);\n\nconst emit = defineEmits([\"update:modelValue\", \"on-input\"]);\n\nconst model = computed({\n  get: () => props.modelValue,\n  set: (val: string) => {\n    emit(\"update:modelValue\", val);\n  },\n});\n</script>\n\n<template>\n  <LTabs v-model=\"model\" manual class=\"mt-2 bg-white dark:bg-s-700\">\n    <LTabsList class=\"flex space-x-1\">\n      <LTab\n        v-for=\"tab in tabs\"\n        :key=\"tab\"\n        :tab=\"tab\"\n        as=\"template\"\n        v-slot=\"{ selected }\"\n      >\n        <button\n          type=\"button\"\n          :class=\"[\n            'w-full p-2 leading-5 font-medium text-s-900 dark:text-s-300 border-b-2',\n            'focus:outline-none ring-offset-1 ring-offset-s-300 ring-opacity-20',\n            selected\n              ? 'border-p-500 '\n              : 'border-transparent text-s-100 hover:bg-black/[0.1] hover:text-black dark:hover:text-white',\n          ]\"\n        >\n          {{ tab }}\n        </button>\n      </LTab>\n    </LTabsList>\n    <LTabPanels class=\"flex-auto\">\n      <div\n        :class=\"[\n          'p-3',\n          'focus:outline-none focus:ring-1 focus:ring-dott ring-s-200 ring-opacity-20',\n        ]\"\n      >\n        <LTabPanel key=\"Recent\">\n          Recent\n          <button>Button</button>\n        </LTabPanel>\n        <LTabPanel key=\"Popular\">\n          Popular\n          <button>Popular Button</button>\n        </LTabPanel>\n      </div>\n    </LTabPanels>\n  </LTabs>\n</template>\n"],"names":["useDom","ref","__name","TabsContext","useContext","component","context","inject","err","LTabs","defineComponent","_index","index","props","slots","emit","selectedIndex","focusedIndex","selectedKey","focusedKey","tabs","tabsKeys","panels","model","computed","val","tabApi","key","x","tab","indexTab","tabKey","id","idx","panel","watch","provide","h","LTabsList","ourProps","LTab","expose","useId","internalTabRef","onMounted","onUnmounted","selected","focused","nextTab","e","_a","prevTab","handleFocus","handleSelection","handleMouseDown","handleKeyDown","_b","_c","_d","relatedPanel","_slots","_children","LTabPanels","slot","LTabPanel","internalPanelRef","myIndex","__default__"],"mappings":"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"}